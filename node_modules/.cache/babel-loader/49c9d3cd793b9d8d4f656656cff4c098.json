{"ast":null,"code":"import nextafter from 'nextafter';\n/**\n * @module interval-arithmetic/round-math\n */\n\nfunction identity(v) {\n  return v;\n}\n\nfunction prev(v) {\n  if (v === Infinity) {\n    return v;\n  }\n\n  return nextafter(v, -Infinity);\n}\n\nfunction next(v) {\n  if (v === -Infinity) {\n    return v;\n  }\n\n  return nextafter(v, Infinity);\n}\n\nfunction toInteger(x) {\n  return x < 0 ? Math.ceil(x) : Math.floor(x);\n}\n\nvar cache = {\n  prev: prev,\n  next: next\n};\n/**\n * @alias module:interval-arithmetic/round-math\n */\n\nvar round = {\n  /**\n   * Computes the previous IEEE floating point representation of `v`\n   * @example\n   * Interval.round.safePrev(1)          // 0.9999999999999999\n   * Interval.round.safePrev(3)          // 2.9999999999999996\n   * Interval.round.safePrev(Infinity)   // Infinity\n   * @param {number} v\n   * @return {number}\n   * @function\n   */\n  safePrev: prev,\n\n  /**\n   * Computes the next IEEE floating point representation of `v`\n   * @example\n   * Interval.round.safeNext(1)          // 1.0000000000000002\n   * Interval.round.safeNext(3)          // 3.0000000000000004\n   * Interval.round.safeNext(-Infinity)  // -Infinity\n   * @param {number} v\n   * @return {number}\n   * @function\n   */\n  safeNext: next,\n  prev: function (x) {\n    return cache.prev(x);\n  },\n  next: function (x) {\n    return cache.next(x);\n  },\n  // prettier-ignore\n  addLo: function (x, y) {\n    return round.prev(x + y);\n  },\n  // prettier-ignore\n  addHi: function (x, y) {\n    return round.next(x + y);\n  },\n  // prettier-ignore\n  subLo: function (x, y) {\n    return round.prev(x - y);\n  },\n  // prettier-ignore\n  subHi: function (x, y) {\n    return round.next(x - y);\n  },\n  // prettier-ignore\n  mulLo: function (x, y) {\n    return round.prev(x * y);\n  },\n  // prettier-ignore\n  mulHi: function (x, y) {\n    return round.next(x * y);\n  },\n  // prettier-ignore\n  divLo: function (x, y) {\n    return round.prev(x / y);\n  },\n  // prettier-ignore\n  divHi: function (x, y) {\n    return round.next(x / y);\n  },\n  // prettier-ignore\n  intLo: function (x) {\n    return toInteger(round.prev(x));\n  },\n  // prettier-ignore\n  intHi: function (x) {\n    return toInteger(round.next(x));\n  },\n  // prettier-ignore\n  logLo: function (x) {\n    return round.prev(Math.log(x));\n  },\n  // prettier-ignore\n  logHi: function (x) {\n    return round.next(Math.log(x));\n  },\n  // prettier-ignore\n  expLo: function (x) {\n    return round.prev(Math.exp(x));\n  },\n  // prettier-ignore\n  expHi: function (x) {\n    return round.next(Math.exp(x));\n  },\n  // prettier-ignore\n  sinLo: function (x) {\n    return round.prev(Math.sin(x));\n  },\n  // prettier-ignore\n  sinHi: function (x) {\n    return round.next(Math.sin(x));\n  },\n  // prettier-ignore\n  cosLo: function (x) {\n    return round.prev(Math.cos(x));\n  },\n  // prettier-ignore\n  cosHi: function (x) {\n    return round.next(Math.cos(x));\n  },\n  // prettier-ignore\n  tanLo: function (x) {\n    return round.prev(Math.tan(x));\n  },\n  // prettier-ignore\n  tanHi: function (x) {\n    return round.next(Math.tan(x));\n  },\n  // prettier-ignore\n  asinLo: function (x) {\n    return round.prev(Math.asin(x));\n  },\n  // prettier-ignore\n  asinHi: function (x) {\n    return round.next(Math.asin(x));\n  },\n  // prettier-ignore\n  acosLo: function (x) {\n    return round.prev(Math.acos(x));\n  },\n  // prettier-ignore\n  acosHi: function (x) {\n    return round.next(Math.acos(x));\n  },\n  // prettier-ignore\n  atanLo: function (x) {\n    return round.prev(Math.atan(x));\n  },\n  // prettier-ignore\n  atanHi: function (x) {\n    return round.next(Math.atan(x));\n  },\n  // polyfill required for hyperbolic functions\n  // prettier-ignore\n  sinhLo: function (x) {\n    return round.prev(Math.sinh(x));\n  },\n  // prettier-ignore\n  sinhHi: function (x) {\n    return round.next(Math.sinh(x));\n  },\n  // prettier-ignore\n  coshLo: function (x) {\n    return round.prev(Math.cosh(x));\n  },\n  // prettier-ignore\n  coshHi: function (x) {\n    return round.next(Math.cosh(x));\n  },\n  // prettier-ignore\n  tanhLo: function (x) {\n    return round.prev(Math.tanh(x));\n  },\n  // prettier-ignore\n  tanhHi: function (x) {\n    return round.next(Math.tanh(x));\n  },\n\n  /**\n   * @ignore\n   * ln(power) exponentiation of x\n   * @param {number} x\n   * @param {number} power\n   * @returns {number}\n   */\n  powLo: function (x, power) {\n    if (power % 1 !== 0) {\n      // power has decimals\n      return round.prev(Math.pow(x, power));\n    }\n\n    var y = (power & 1) === 1 ? x : 1;\n    power >>= 1;\n\n    while (power > 0) {\n      x = round.mulLo(x, x);\n\n      if ((power & 1) === 1) {\n        y = round.mulLo(x, y);\n      }\n\n      power >>= 1;\n    }\n\n    return y;\n  },\n\n  /**\n   * @ignore\n   * ln(power) exponentiation of x\n   * @param {number} x\n   * @param {number} power\n   * @returns {number}\n   */\n  powHi: function (x, power) {\n    if (power % 1 !== 0) {\n      // power has decimals\n      return round.next(Math.pow(x, power));\n    }\n\n    var y = (power & 1) === 1 ? x : 1;\n    power >>= 1;\n\n    while (power > 0) {\n      x = round.mulHi(x, x);\n\n      if ((power & 1) === 1) {\n        y = round.mulHi(x, y);\n      }\n\n      power >>= 1;\n    }\n\n    return y;\n  },\n  // prettier-ignore\n  sqrtLo: function (x) {\n    return round.prev(Math.sqrt(x));\n  },\n  // prettier-ignore\n  sqrtHi: function (x) {\n    return round.next(Math.sqrt(x));\n  },\n\n  /**\n   * Most operations on intervals will cary the rounding error so that the\n   * resulting interval correctly represents all the possible values, this feature\n   * can be disabled by calling this method allowing a little boost in the\n   * performance while operating on intervals\n   *\n   * @see module:interval-arithmetic/round-math.enable\n   * @example\n   * var x = Interval.add(\n   *   Interval(1),\n   *   Interval(1)\n   * )\n   * x // equal to {lo: 1.9999999999999998, hi: 2.0000000000000004}\n   *\n   * Interval.round.disable()\n   * var y = Interval.add(\n   *   Interval(1),\n   *   Interval(1)\n   * )\n   * y // equal to {lo: 2, hi: 2}\n   * @function\n   */\n  disable: function () {\n    cache.next = cache.prev = identity;\n  },\n\n  /**\n   * Enables IEEE previous/next floating point wrapping of values (enabled by\n   * default)\n   * @see module:interval-arithmetic/round-math.disable\n   * @example\n   * var x = Interval.add(\n   *   Interval(1),\n   *   Interval(1)\n   * )\n   * x // equal to {lo: 1.9999999999999998, hi: 2.0000000000000004}\n   *\n   * Interval.round.disable()\n   * var y = Interval.add(\n   *   Interval(1),\n   *   Interval(1)\n   * )\n   * y // equal to {lo: 2, hi: 2}\n   *\n   * Interval.round.enable()\n   * var z = Interval.add(\n   *   Interval(1),\n   *   Interval(1)\n   * )\n   * z // equal to {lo: 1.9999999999999998, hi: 2.0000000000000004}\n   * @function\n   */\n  enable: function () {\n    cache.next = next;\n    cache.prev = prev;\n  }\n};\nexport default round;","map":{"version":3,"mappings":"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","names":["nextafter","identity","v","prev","Infinity","next","toInteger","x","Math","ceil","floor","cache","round","safePrev","safeNext","addLo","y","addHi","subLo","subHi","mulLo","mulHi","divLo","divHi","intLo","intHi","logLo","log","logHi","expLo","exp","expHi","sinLo","sin","sinHi","cosLo","cos","cosHi","tanLo","tan","tanHi","asinLo","asin","asinHi","acosLo","acos","acosHi","atanLo","atan","atanHi","sinhLo","sinh","sinhHi","coshLo","cosh","coshHi","tanhLo","tanh","tanhHi","powLo","power","pow","powHi","sqrtLo","sqrt","sqrtHi","disable","enable"],"sources":["../src/round.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}