{"ast":null,"code":"import { create, all, evaluate } from 'mathjs'; // math.js\n\nvar config = {\n  epsilon: 1e-12,\n  matrix: 'Matrix',\n  number: 'number',\n  precision: 64,\n  predictable: false,\n  randomSeed: null\n};\nvar math = create(all, config);\nvar chartProperties = {\n  options: {\n    elements: {\n      point: {\n        radius: 0\n      }\n    },\n    responsive: true,\n    scales: {\n      y: {\n        min: -50,\n        max: 250\n      },\n      x: {\n        min: -250,\n        max: 500\n      }\n    }\n  },\n  data: {\n    labels: this.state.xAxisLabels,\n    // The function\n    datasets: [{\n      label: \"f(x)=x³ + 5x² + 3x + 2\",\n      borderColor: \"blue\",\n      function: this.state.fn,\n      data: []\n    }, // The function's tangent line\n    {\n      label: \"Tangent\",\n      borderColor: \"gray\",\n      function: this.state.fn,\n      // The function is later manipulated in the plugin for it to be a tangent line\n      data: [],\n      curApprox: this.state.curApprox\n    }]\n  },\n  plugins: [{\n    beforeInit: function beforeInit(chart) {\n      var data = chart.config.data;\n\n      for (var j = 0; j < data.datasets.length; j++) {\n        for (var i = 0; i < data.labels.length; i++) {\n          var f = data.datasets[j].function;\n          var x = data.labels[i];\n          var y = void 0;\n          y = math.evaluate(f, {\n            x: x\n          });\n\n          if (data.datasets[j].label == \"Tangent\") {\n            var a = data.datasets[j].curApprox;\n            var derivative = math.derivative(f, \"x\"); // L(x) = f '(a) (x - a) + f(a)\n\n            var L = \"\".concat(derivative.evaluate({\n              x: a\n            }), \" * (x-\").concat(a, \") + \").concat(evaluate(f, {\n              x: a\n            }));\n            y = math.evaluate(L, {\n              x: x\n            });\n          }\n\n          data.datasets[j].data.push(y);\n        }\n      }\n    }\n  }],\n  annotation: {\n    annotations: [{\n      type: \"line\",\n      mode: \"vertical\",\n      scaleID: \"x-axis-0\",\n      borderColor: \"red\",\n      label: {\n        content: \"\",\n        enabled: true,\n        position: \"top\"\n      }\n    }]\n  }\n};\nexport default chartProperties;","map":{"version":3,"names":["create","all","evaluate","config","epsilon","matrix","number","precision","predictable","randomSeed","math","chartProperties","options","elements","point","radius","responsive","scales","y","min","max","x","data","labels","state","xAxisLabels","datasets","label","borderColor","function","fn","curApprox","plugins","beforeInit","chart","j","length","i","f","a","derivative","L","push","annotation","annotations","type","mode","scaleID","content","enabled","position"],"sources":["/home/programowanie/newton-rhapson/newton/src/ChartProperties.js"],"sourcesContent":["import { create, all, evaluate } from 'mathjs'\n\n\n// math.js\nconst config = {\n  epsilon: 1e-12,\n  matrix: 'Matrix',\n  number: 'number',\n  precision: 64,\n  predictable: false,\n  randomSeed: null\n}\nconst math = create(all, config)\n\nlet chartProperties = {\n    options: {\n        elements: {\n          point: {\n            radius: 0\n          }\n        },\n        responsive: true,\n        scales: {\n          y: {\n            min: -50,\n            max: 250\n          },\n          x: {\n            min: -250,\n            max: 500\n          },\n        }\n      },\n      data: {\n        labels: this.state.xAxisLabels,\n        // The function\n        datasets: [{\n          label: \"f(x)=x³ + 5x² + 3x + 2\",\n          borderColor: \"blue\",\n          function: this.state.fn,\n          data: [],\n        }, \n        // The function's tangent line\n        {\n          label: \"Tangent\",\n          borderColor: \"gray\",\n          function: this.state.fn, // The function is later manipulated in the plugin for it to be a tangent line\n          data: [],\n          curApprox: this.state.curApprox\n        },\n      ]\n      },\n      plugins: [{\n        beforeInit: function(chart) {\n          let data = chart.config.data;\n          for(let j = 0; j < data.datasets.length; j++) {\n            for(let i = 0; i < data.labels.length; i++) {\n              let f = data.datasets[j].function;\n              \n              let x = data.labels[i];\n              let y;\n  \n              y = math.evaluate(f, {x: x});\n              if(data.datasets[j].label == \"Tangent\") {\n                let a = data.datasets[j].curApprox;\n  \n  \n                let derivative = math.derivative(f, \"x\")\n  \n                // L(x) = f '(a) (x - a) + f(a)\n                let L = `${derivative.evaluate({x:a})} * (x-${a}) + ${evaluate(f, {x:a})}`;\n                \n  \n                y = math.evaluate(L, {x:x});\n              }\n              \n  \n              data.datasets[j].data.push(y);\n            }\n          }\n        }\n    }],\n    annotation: {\n      annotations: [\n        {\n          type: \"line\",\n          mode: \"vertical\",\n          scaleID: \"x-axis-0\",\n          borderColor: \"red\",\n          label: {\n            content: \"\",\n            enabled: true,\n            position: \"top\"\n          }\n        }\n      ]\n    }\n}\n\nexport default chartProperties;"],"mappings":"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"},"metadata":{},"sourceType":"module"}